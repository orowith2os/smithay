<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Utilities for manipulating the primary selection"><meta name="keywords" content="rust, rustlang, rust-lang, primary_selection"><title>smithay::wayland::primary_selection - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../../storage.js"></script><script defer src="../../../main.js"></script><noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../../smithay/index.html"><div class="logo-container"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></div></a><h2 class="location"></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../../smithay/index.html"><div class="logo-container"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Module primary_selection</a></h2><div class="sidebar-elems"><section><div class="block"><ul><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li></ul></div></section></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../../smithay/index.html"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../wheel.svg"></a></div></div></form></nav></div><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn"><span class="in-band">Module <a href="../../index.html">smithay</a>::<wbr><a href="../index.html">wayland</a>::<wbr><a class="mod" href="#">primary_selection</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../../src/smithay/wayland/primary_selection/mod.rs.html#1-263">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Utilities for manipulating the primary selection</p>
<p>The primary selection is an additional protocol modeled after the data device to represent
and additional selection (copy/paste), a concept taken from the X11 Server.
This primary selection is a shortcut to the common clipboard selection,
where text just needs to be selected in order to allow copying it elsewhere
The de facto way to perform this action is the middle mouse button, although it is not limited to this one.</p>
<p>This module provides the freestanding <a href="fn.set_primary_focus.html" title="set_primary_focus"><code>set_primary_focus</code></a> function:
This function sets the data device focus for a given seat; you’d typically call it
whenever the keyboard focus changes, to follow it (for example in the focus hook of your keyboards).</p>
<p>The module also provides an additional mechanism allowing your compositor to see and interact with
the contents of the primary selection:</p>
<ul>
<li>the freestanding function <a href="fn.set_primary_selection.html" title="set_primary_selection"><code>set_primary_selection</code></a>
allows you to set the contents of the selection for your clients</li>
<li>the <code>PrimarySelectionHandle</code> gives you the option to inspect new selections
by overriding <a href="trait.PrimarySelectionHandler.html#method.new_selection" title="PrimarySelectionHandler::new_selection">`PrimarySelectionHandler::new_selection</a>.</li>
</ul>
<h3 id="initialization"><a href="#initialization">Initialization</a></h3>
<p>To initialize this implementation, create the <a href="struct.PrimarySelectionState.html" title="PrimarySelectionState"><code>PrimarySelectionState</code></a>, store it inside your <code>State</code> struct
and implement the <a href="trait.PrimarySelectionHandler.html" title="PrimarySelectionHandler"><code>PrimarySelectionHandler</code></a>, as shown in this example:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">smithay::delegate_primary_selection</span>;
<span class="kw">use</span> <span class="ident">smithay::wayland::primary_selection</span>::{<span class="ident">PrimarySelectionState</span>, <span class="ident">PrimarySelectionHandler</span>};

<span class="comment">// Create the primary_selection state</span>
<span class="kw">let</span> <span class="ident">primary_selection_state</span> <span class="op">=</span> <span class="ident">PrimarySelectionState::new</span>::<span class="op">&lt;</span><span class="ident">State</span>, <span class="kw">_</span><span class="op">&gt;</span>(
    <span class="kw-2">&amp;</span><span class="ident">display</span>.<span class="ident">handle</span>(),
    <span class="prelude-val">None</span> <span class="comment">// We don&#39;t add a logger in this example</span>
);

<span class="comment">// insert the PrimarySelectionState into your state</span>
<span class="comment">// ..</span>

<span class="comment">// implement the necessary traits</span>
<span class="kw">impl</span> <span class="ident">PrimarySelectionHandler</span> <span class="kw">for</span> <span class="ident">State</span> {
    <span class="kw">fn</span> <span class="ident">primary_selection_state</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; <span class="kw-2">&amp;</span><span class="ident">PrimarySelectionState</span> { <span class="kw-2">&amp;</span><span class="self">self</span>.<span class="ident">primary_selection_state</span> }
    <span class="comment">// ... override default implementations here to customize handling ...</span>
}
<span class="macro">delegate_primary_selection!</span>(<span class="ident">State</span>);

<span class="comment">// You&#39;re now ready to go!</span></code></pre></div>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.PrimarySelectionState.html" title="smithay::wayland::primary_selection::PrimarySelectionState struct">PrimarySelectionState</a></div><div class="item-right docblock-short"><p>State of data device</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.SourceMetadata.html" title="smithay::wayland::primary_selection::SourceMetadata struct">SourceMetadata</a></div><div class="item-right docblock-short"><p>The metadata describing a data source</p>
</div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.PrimarySelectionHandler.html" title="smithay::wayland::primary_selection::PrimarySelectionHandler trait">PrimarySelectionHandler</a></div><div class="item-right docblock-short"><p>Events that are generated by interactions of the clients with the data device</p>
</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.set_primary_focus.html" title="smithay::wayland::primary_selection::set_primary_focus fn">set_primary_focus</a></div><div class="item-right docblock-short"><p>Set the primary selection focus to a certain client for a given seat</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.set_primary_selection.html" title="smithay::wayland::primary_selection::set_primary_selection fn">set_primary_selection</a></div><div class="item-right docblock-short"><p>Set a compositor-provided primary selection for this seat</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.with_source_metadata.html" title="smithay::wayland::primary_selection::with_source_metadata fn">with_source_metadata</a></div><div class="item-right docblock-short"><p>Access the metadata of a data source</p>
</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../../" data-current-crate="smithay" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.64.0 (a55dd71d5 2022-09-19)" ></div></body></html>